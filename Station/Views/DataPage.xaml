<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Station.Views.DataPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Station.Views"
    xmlns:viewmodels="using:Station.ViewModels"
    xmlns:lvc="using:LiveChartsCore.SkiaSharpView.WinUI"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{StaticResource BackgroundSecondaryBrush}">

    <Grid Padding="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Page Header -->
        <Grid Grid.Row="0" Margin="0,0,0,24">
            <StackPanel Spacing="8">
                <TextBlock Text="ðŸ“Š GiÃ¡m sÃ¡t Dá»¯ liá»‡u Real-time"
                           Style="{StaticResource TitleTextBlockStyle}"/>
                <TextBlock Text="Theo dÃµi dá»¯ liá»‡u theo cáº¥u trÃºc: Tráº¡m â†’ Tuyáº¿n â†’ NÃºt cáº£m biáº¿n"
                           Style="{StaticResource CaptionTextBlockStyle}"/>
            </StackPanel>

            <!-- Real-time Indicator -->
            <StackPanel Orientation="Horizontal" Spacing="8"
                        HorizontalAlignment="Right" VerticalAlignment="Center">
                <Ellipse Width="12" Height="12" Fill="#22C55E">
                    <Ellipse.OpacityTransition>
                        <ScalarTransition Duration="0:0:1"/>
                    </Ellipse.OpacityTransition>
                </Ellipse>
                <TextBlock Text="Äang cáº­p nháº­t"
                           FontSize="12"
                           Foreground="#22C55E"/>
            </StackPanel>
        </Grid>

        <!-- Filters and Controls -->
        <Grid Grid.Row="1" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Line Filter -->
            <StackPanel Grid.Column="0" Margin="0,0,12,0">
                <TextBlock Text="Tuyáº¿n" FontSize="12" Margin="0,0,0,4"/>
                <ComboBox x:Name="LineFilterComboBox"
                          PlaceholderText="Táº¥t cáº£ tuyáº¿n"
                          MinWidth="150"
                          SelectionChanged="LineFilter_SelectionChanged">
                    <ComboBoxItem Content="Táº¥t cáº£" IsSelected="True"/>
                    <ComboBoxItem Content="Tuyáº¿n A"/>
                    <ComboBoxItem Content="Tuyáº¿n B"/>
                    <ComboBoxItem Content="Tuyáº¿n C"/>
                </ComboBox>
            </StackPanel>

            <!-- Node Type Filter -->
            <StackPanel Grid.Column="1" Margin="0,0,12,0">
                <TextBlock Text="Loáº¡i nÃºt" FontSize="12" Margin="0,0,0,4"/>
                <ComboBox x:Name="NodeTypeFilterComboBox"
                          PlaceholderText="Táº¥t cáº£ loáº¡i"
                          MinWidth="150"
                          SelectionChanged="NodeTypeFilter_SelectionChanged">
                    <ComboBoxItem Content="Táº¥t cáº£" IsSelected="True"/>
                    <ComboBoxItem Content="ðŸ“¡ Radar"/>
                    <ComboBoxItem Content="ðŸ“¹ Camera"/>
                    <ComboBoxItem Content="ðŸŒ¡ï¸ Nhiá»‡t Ä‘á»™"/>
                    <ComboBoxItem Content="ðŸ’§ Äá»™ áº©m"/>
                    <ComboBoxItem Content="ðŸ’¡ Ãnh sÃ¡ng"/>
                    <ComboBoxItem Content="ðŸŒŠ Má»±c nÆ°á»›c"/>
                    <ComboBoxItem Content="ðŸ“Š Rung Ä‘á»™ng"/>
                </ComboBox>
            </StackPanel>

            <!-- Status Filter -->
            <StackPanel Grid.Column="2" Margin="0,0,12,0">
                <TextBlock Text="Tráº¡ng thÃ¡i" FontSize="12" Margin="0,0,0,4"/>
                <ComboBox x:Name="StatusFilterComboBox"
                          PlaceholderText="Táº¥t cáº£"
                          MinWidth="150"
                          SelectionChanged="StatusFilter_SelectionChanged">
                    <ComboBoxItem Content="Táº¥t cáº£" IsSelected="True"/>
                    <ComboBoxItem Content="âœ… BÃ¬nh thÆ°á»ng"/>
                    <ComboBoxItem Content="âš ï¸ Cáº£nh bÃ¡o"/>
                    <ComboBoxItem Content="ðŸ”´ NghiÃªm trá»ng"/>
                    <ComboBoxItem Content="âš« Offline"/>
                </ComboBox>
            </StackPanel>

            <!-- Time Range Filter -->
            <StackPanel Grid.Column="3" Margin="0,0,12,0">
                <TextBlock Text="Khoáº£ng thá»i gian" FontSize="12" Margin="0,0,0,4"/>
                <ComboBox x:Name="TimeRangeComboBox"
                          MinWidth="150"
                          SelectionChanged="TimeRange_SelectionChanged">
                    <ComboBoxItem Content="1 giá» qua"/>
                    <ComboBoxItem Content="6 giá» qua" IsSelected="True"/>
                    <ComboBoxItem Content="24 giá» qua"/>
                    <ComboBoxItem Content="7 ngÃ y qua"/>
                    <ComboBoxItem Content="30 ngÃ y qua"/>
                </ComboBox>
            </StackPanel>

            <!-- Spacer -->
            <Border Grid.Column="4"/>

            <!-- Refresh and Export Buttons -->
            <StackPanel Grid.Column="5" Orientation="Horizontal" Spacing="8" VerticalAlignment="Bottom">
                <Button Content="ðŸ”„ LÃ m má»›i"
                        Click="RefreshData_Click"
                        Style="{StaticResource AccentButtonStyle}"/>
                <Button Content="ðŸ“¥ Xuáº¥t dá»¯ liá»‡u"
                        Click="ExportData_Click"/>
            </StackPanel>
        </Grid>

        <!-- Main Content -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="280"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Panel - Line Tree -->
            <Border Grid.Column="0"
                    Background="{StaticResource MonitoringPanelBackgroundBrush}"
                    CornerRadius="8"
                    Padding="16"
                    Margin="0,0,12,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0"
                               Text="ðŸ—ºï¸ Cáº¥u trÃºc tuyáº¿n"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Margin="0,0,0,12"/>

                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                        <StackPanel x:Name="LineTreePanel" Spacing="8">
                            <!-- Will be populated dynamically -->
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </Border>

            <!-- Right Panel - Charts -->
            <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
                <StackPanel Spacing="16" x:Name="ChartsPanel">
                    <!-- Charts will be added dynamically -->
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Grid>
</Page>
