<Page
    x:Class="Station.Views.MapPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:esri="using:Esri.ArcGISRuntime.UI.Controls"
    mc:Ignorable="d"
    Background="{StaticResource BackgroundSecondaryBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0"
                Background="{StaticResource BackgroundPrimaryBrush}"
                BorderBrush="{StaticResource BorderLightBrush}"
                BorderThickness="0,0,0,1"
                Padding="24,16">
            <Grid>
                <StackPanel VerticalAlignment="Center">
                    <TextBlock Text="Bản đồ"
                               Style="{StaticResource TitleTextBlockStyle}"/>
                    <TextBlock Text="Hệ thống giám sát trên bản đồ"
                               Style="{StaticResource SubtitleTextBlockStyle}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,4,0,0"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            Spacing="12">
                    <ComboBox x:Name="BasemapSelector"
                              SelectionChanged="BasemapSelector_SelectionChanged"
                              SelectedIndex="0"
                              MinWidth="150">
                        <ComboBoxItem Content="Streets" Tag="Streets"/>
                        <ComboBoxItem Content="Imagery" Tag="Imagery"/>
                        <ComboBoxItem Content="Topographic" Tag="Topographic"/>
                        <ComboBoxItem Content="Oceans" Tag="Oceans"/>
                    </ComboBox>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Map Container -->
        <Grid Grid.Row="1">
            <!-- Map Control -->
            <esri:MapView x:Name="MyMapView" />

            <!-- Map Controls Overlay -->
            <StackPanel VerticalAlignment="Bottom"
                        HorizontalAlignment="Right"
                        Margin="20"
                        Spacing="8">
                <!-- Zoom In -->
                <Button x:Name="ZoomInButton"
                        Click="ZoomInButton_Click"
                        Width="40"
                        Height="40"
                        Background="{StaticResource BackgroundPrimaryBrush}"
                        BorderBrush="{StaticResource BorderLightBrush}"
                        BorderThickness="1"
                        CornerRadius="20"
                        ToolTipService.ToolTip="Phóng to">
                    <FontIcon Glyph="&#xE710;"
                              FontSize="16"
                              Foreground="{StaticResource TextPrimaryBrush}"/>
                </Button>

                <!-- Zoom Out -->
                <Button x:Name="ZoomOutButton"
                        Click="ZoomOutButton_Click"
                        Width="40"
                        Height="40"
                        Background="{StaticResource BackgroundPrimaryBrush}"
                        BorderBrush="{StaticResource BorderLightBrush}"
                        BorderThickness="1"
                        CornerRadius="20"
                        ToolTipService.ToolTip="Thu nhỏ">
                    <FontIcon Glyph="&#xE738;"
                              FontSize="16"
                              Foreground="{StaticResource TextPrimaryBrush}"/>
                </Button>

                <!-- Reset View -->
                <Button x:Name="ResetButton"
                        Click="ResetButton_Click"
                        Width="40"
                        Height="40"
                        Background="{StaticResource BackgroundPrimaryBrush}"
                        BorderBrush="{StaticResource BorderLightBrush}"
                        BorderThickness="1"
                        CornerRadius="20"
                        ToolTipService.ToolTip="Đặt lại vị trí">
                    <FontIcon Glyph="&#xE72C;"
                              FontSize="16"
                              Foreground="{StaticResource TextPrimaryBrush}"/>
                </Button>
            </StackPanel>

            <!-- Loading Indicator -->
            <Border x:Name="LoadingOverlay"
                    Background="#80000000"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Visibility="{x:Bind LoadingRing.IsActive, Mode=OneWay}">
                <StackPanel HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Spacing="16">
                    <ProgressRing x:Name="LoadingRing"
                                  IsActive="True"
                                  Width="60"
                                  Height="60"
                                  Foreground="{StaticResource PrimaryMediumBrush}"/>
                    <TextBlock Text="Đang tải bản đồ..."
                               FontSize="16"
                               Foreground="White"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="Vui lòng kiểm tra kết nối internet"
                               FontSize="12"
                               Foreground="#CCFFFFFF"
                               HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Page>
