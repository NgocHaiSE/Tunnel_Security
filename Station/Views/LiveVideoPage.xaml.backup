<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Station.Views.LiveVideoPage"
    x:Name="PageRoot"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:viewmodels="using:Station.ViewModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{StaticResource BackgroundSecondaryBrush}">

	<Grid Padding="32,24">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<!-- Header Section -->
		<Grid Grid.Row="0" Margin="0,0,0,24">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>

			<!-- Title and Stats -->
			<StackPanel Grid.Column="0" Spacing="12">
				<TextBlock Text="Video Trực tiếp / AI Snapshot"
                           Style="{StaticResource TitleTextBlockStyle}"/>

				<StackPanel Orientation="Horizontal" Spacing="24">
					<!-- Active Cameras Stat -->
					<StackPanel Orientation="Horizontal" Spacing="8">
						<Border Background="{StaticResource SeverityLowLightBrush}"
                                CornerRadius="8"
                                Width="40" Height="40"
                                Padding="8">
							<FontIcon Glyph="&#xE714;"
                                      Foreground="{StaticResource SeverityLowBrush}"
                                      FontSize="20"/>
						</Border>
						<StackPanel VerticalAlignment="Center">
							<TextBlock FontSize="{StaticResource FontSizeSmall}"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       Text="Cameras Online"/>
							<TextBlock FontSize="{StaticResource FontSizeLarge}"
                                       FontWeight="Bold"
                                       Foreground="{StaticResource SeverityLowBrush}">
								<Run Text="{x:Bind ViewModel.ActiveCameras, Mode=OneWay}"/>
								<Run Text="/" FontWeight="Normal" Foreground="{StaticResource TextTertiaryBrush}"/>
								<Run Text="{x:Bind ViewModel.TotalCameras, Mode=OneWay}"
                                     FontWeight="Normal" Foreground="{StaticResource TextTertiaryBrush}"/>
							</TextBlock>
						</StackPanel>
					</StackPanel>

					<!-- Current Layout -->
					<Border Background="{StaticResource PrimaryLightBrush}"
                            CornerRadius="8"
                            Padding="16,8"
                            VerticalAlignment="Center">
						<StackPanel Orientation="Horizontal" Spacing="8">
							<FontIcon Glyph="&#xE80A;"
                                      FontSize="16"
                                      Foreground="{StaticResource PrimaryDarkBrush}"/>
							<TextBlock Text="{x:Bind ViewModel.SelectedLayoutText, Mode=OneWay}"
                                       FontSize="{StaticResource FontSizeSmall}"
                                       Foreground="{StaticResource PrimaryDarkBrush}"
                                       FontWeight="SemiBold"/>
						</StackPanel>
					</Border>
				</StackPanel>
			</StackPanel>

			<!-- Action Buttons -->
			<StackPanel Grid.Column="1"
                        Orientation="Horizontal"
                        Spacing="12"
                        VerticalAlignment="Center">

				<!-- Layout Selector ComboBox -->
				<ComboBox x:Name="LayoutComboBox"
                          MinWidth="180"
                          SelectionChanged="LayoutComboBox_SelectionChanged"
                          SelectedIndex="1"
                          Style="{StaticResource DefaultComboBoxStyle}">
					<ComboBoxItem Tag="1">
						<StackPanel Orientation="Horizontal" Spacing="8">
							<FontIcon Glyph="&#xE8A9;" FontSize="16"/>
							<TextBlock Text="1×1 - Single View"/>
						</StackPanel>
					</ComboBoxItem>
					<ComboBoxItem Tag="4">
						<StackPanel Orientation="Horizontal" Spacing="8">
							<FontIcon Glyph="&#xE89A;" FontSize="16"/>
							<TextBlock Text="2×2 - Quad View"/>
						</StackPanel>
					</ComboBoxItem>
					<ComboBoxItem Tag="9">
						<StackPanel Orientation="Horizontal" Spacing="8">
							<FontIcon Glyph="&#xE80A;" FontSize="16"/>
							<TextBlock Text="3×3 - Grid View"/>
						</StackPanel>
					</ComboBoxItem>
					<ComboBoxItem Tag="16">
						<StackPanel Orientation="Horizontal" Spacing="8">
							<FontIcon Glyph="&#xE8FE;" FontSize="16"/>
							<TextBlock Text="4×4 - Matrix View"/>
						</StackPanel>
					</ComboBoxItem>
				</ComboBox>

				<!-- Refresh Button -->
				<Button Style="{StaticResource SecondaryButtonStyle}"
                        Command="{x:Bind ViewModel.RefreshStreamsCommand}"
                        ToolTipService.ToolTip="Refresh all camera streams">
					<StackPanel Orientation="Horizontal" Spacing="8">
						<FontIcon Glyph="&#xE72C;" FontSize="16"/>
						<TextBlock Text="Refresh"/>
					</StackPanel>
				</Button>
			</StackPanel>
		</Grid>

		<!-- Main Content: Sidebar + Camera Grid -->
		<Grid Grid.Row="1">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="320"/>
				<ColumnDefinition Width="*"/>
			</Grid.ColumnDefinitions>

			<!-- Sidebar: Camera Selection -->
			<Border Grid.Column="0"
                    Background="{StaticResource BackgroundPrimaryBrush}"
                    BorderBrush="{StaticResource BorderLightBrush}"
                    BorderThickness="0,0,1,0"
                    Padding="0">
				<Grid>
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="*"/>
					</Grid.RowDefinitions>

					<!-- Sidebar Header -->
					<Border Grid.Row="0"
                            Background="{StaticResource BackgroundSecondaryBrush}"
                            BorderBrush="{StaticResource BorderLightBrush}"
                            BorderThickness="0,0,0,1"
                            Padding="16,12">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="Auto"/>
							</Grid.ColumnDefinitions>

							<TextBlock Grid.Column="0"
                                       Text="Chọn Camera"
                                       FontSize="{StaticResource FontSizeMedium}"
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimaryBrush}"/>

							<StackPanel Grid.Column="1"
                                        Orientation="Horizontal"
                                        Spacing="8">
								<Button x:Name="SelectAllButton"
                                        Content="Tất cả"
                                        Click="SelectAllButton_Click"
                                        FontSize="11"
                                        Padding="8,4"
                                        Style="{StaticResource SecondaryButtonStyle}"/>
								<Button x:Name="DeselectAllButton"
                                        Content="Bỏ chọn"
                                        Click="DeselectAllButton_Click"
                                        FontSize="11"
                                        Padding="8,4"
                                        Style="{StaticResource SecondaryButtonStyle}"/>
							</StackPanel>
						</Grid>
					</Border>

					<!-- Nodes and Cameras List -->
					<ScrollViewer Grid.Row="1"
                                  VerticalScrollBarVisibility="Auto"
                                  Padding="12">
						<ItemsControl x:Name="NodesListControl"
                                      ItemsSource="{x:Bind ViewModel.Nodes, Mode=OneWay}">
							<ItemsControl.ItemTemplate>
								<DataTemplate x:DataType="viewmodels:NodeItemViewModel">
									<StackPanel Margin="0,0,0,16">
										<!-- Node Header -->
										<Border Background="{StaticResource BackgroundSecondaryBrush}"
                                                    CornerRadius="6"
                                                    Padding="12,8"
                                                    Margin="0,0,0,8">
											<Grid>
												<Grid.ColumnDefinitions>
													<ColumnDefinition Width="*"/>
													<ColumnDefinition Width="Auto"/>
												</Grid.ColumnDefinitions>

												<StackPanel Grid.Column="0" Spacing="4">
													<TextBlock Text="{x:Bind NodeName}"
                                                               FontWeight="SemiBold"
                                                               FontSize="{StaticResource FontSizeSmall}"
                                                               Foreground="{StaticResource TextPrimaryBrush}"/>
													<TextBlock Text="{x:Bind Location}"
                                                               FontSize="11"
                                                               Foreground="{StaticResource TextTertiaryBrush}"/>
												</StackPanel>

												<Border Grid.Column="1"
                                                            Background="{x:Bind StatusBackgroundColor}"
                                                            CornerRadius="10"
                                                            Padding="8,4">
													<TextBlock Text="{x:Bind StatusText}"
                                                               FontSize="10"
                                                               Foreground="{x:Bind StatusColor}"
                                                               FontWeight="SemiBold"/>
												</Border>
											</Grid>
										</Border>

										<!-- Device/Camera List under Node -->
										<ItemsControl ItemsSource="{x:Bind Devices, Mode=OneWay}">
											<ItemsControl.ItemTemplate>
												<DataTemplate x:DataType="viewmodels:DeviceItemViewModel">
													<CheckBox x:Name="CameraCheckBox"
                                                              Content="{x:Bind Name}"
                                                              IsChecked="{x:Bind IsSelected, Mode=TwoWay}"
                                                              Checked="CameraCheckBox_Checked"
                                                              Unchecked="CameraCheckBox_Unchecked"
                                                              Tag="{x:Bind}"
                                                              Margin="12,0,0,8"
                                                              FontSize="{StaticResource FontSizeSmall}">
														<CheckBox.ContentTemplate>
															<DataTemplate>
																<StackPanel Orientation="Horizontal" Spacing="8">
																	<FontIcon Glyph="&#xE714;" FontSize="14"/>
																	<TextBlock Text="{Binding}" VerticalAlignment="Center"/>
																</StackPanel>
															</DataTemplate>
														</CheckBox.ContentTemplate>
													</CheckBox>
												</DataTemplate>
											</ItemsControl.ItemTemplate>
										</ItemsControl>
									</StackPanel>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>
					</ScrollViewer>
				</Grid>
			</Border>

			<!-- Camera Grid -->
			<ScrollViewer Grid.Column="1"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled"
                          HorizontalAlignment="Center"
                          Padding="24,0,0,0">
				<ItemsControl x:Name="CameraGridControl"
                              ItemsSource="{x:Bind ViewModel.SelectedCameraStreams, Mode=OneWay}"
                              Padding="0,0,0,24"
                              HorizontalAlignment="Center">
					<ItemsControl.ItemsPanel>
						<ItemsPanelTemplate>
							<ItemsWrapGrid x:Name="CameraWrapGrid"
                                           Orientation="Horizontal"
                                           ItemWidth="420"
                                           ItemHeight="340"
                                           MaximumRowsOrColumns="4"
                                           HorizontalAlignment="Center"/>
					</ItemsPanelTemplate>
				</ItemsControl.ItemsPanel>

				<ItemsControl.ItemTemplate>
					<DataTemplate x:DataType="viewmodels:CameraStreamViewModel">
						<Border Background="{StaticResource BackgroundPrimaryBrush}"
                                BorderBrush="{StaticResource BorderLightBrush}"
                                BorderThickness="1"
                                CornerRadius="8"
                                Margin="0,0,16,16"
                                Padding="0">
							<Grid>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto"/>
									<RowDefinition Height="*"/>
									<RowDefinition Height="Auto"/>
								</Grid.RowDefinitions>

								<!-- Camera Header -->
								<Grid Grid.Row="0"
                                      Background="{StaticResource BackgroundSecondaryBrush}"
                                      Padding="12,10">
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="*"/>
										<ColumnDefinition Width="Auto"/>
									</Grid.ColumnDefinitions>

									<!-- Camera Name and Status -->
									<StackPanel Grid.Column="0"
                                                Orientation="Horizontal"
                                                Spacing="10">
										<Ellipse Width="10" Height="10"
                                                 Fill="{x:Bind StatusColor, Mode=OneWay}"
                                                 VerticalAlignment="Center"/>
										<TextBlock Text="{x:Bind CameraName}"
                                                   FontWeight="SemiBold"
                                                   FontSize="{StaticResource FontSizeSmall}"
                                                   Foreground="{StaticResource TextPrimaryBrush}"
                                                   VerticalAlignment="Center"/>
									</StackPanel>

									<!-- Recording and Menu -->
									<StackPanel Grid.Column="1"
                                                Orientation="Horizontal"
                                                Spacing="8">
										<!-- Recording Indicator -->
										<Border Background="{x:Bind RecordingColor, Mode=OneWay}"
                                                CornerRadius="12"
                                                Width="24" Height="24"
                                                Visibility="{x:Bind IsRecording, Mode=OneWay}"
                                                ToolTipService.ToolTip="Recording">
											<FontIcon Glyph="&#xE7C8;"
                                                      FontSize="10"
                                                      Foreground="White"/>
										</Border>

										<!-- Context Menu Button -->
										<Button Background="Transparent"
                                                BorderThickness="0"
                                                Padding="6"
                                                Width="32" Height="32"
                                                ToolTipService.ToolTip="More options">
											<FontIcon Glyph="&#xE712;" FontSize="14"/>
											<Button.Flyout>
												<MenuFlyout>
													<MenuFlyoutItem Text="Take Snapshot">
														<MenuFlyoutItem.Icon>
															<FontIcon Glyph="&#xE722;"/>
														</MenuFlyoutItem.Icon>
													</MenuFlyoutItem>
													<MenuFlyoutItem Text="Start Recording">
														<MenuFlyoutItem.Icon>
															<FontIcon Glyph="&#xE714;"/>
														</MenuFlyoutItem.Icon>
													</MenuFlyoutItem>
													<MenuFlyoutSeparator/>
													<MenuFlyoutItem Text="Settings">
														<MenuFlyoutItem.Icon>
															<FontIcon Glyph="&#xE713;"/>
														</MenuFlyoutItem.Icon>
													</MenuFlyoutItem>
												</MenuFlyout>
											</Button.Flyout>
										</Button>
									</StackPanel>
								</Grid>

								<!-- Video Display Area -->
								<Border Grid.Row="1"
                                        Background="Black"
                                        CornerRadius="0"
                                        MinHeight="220">
									<Grid>
										<!-- Video Placeholder with Diagonal Stripes -->
										<Canvas>
											<Rectangle Width="2000" Height="2000"
                                                       Canvas.Left="-500" Canvas.Top="-500"
                                                       RenderTransformOrigin="0.5,0.5">
												<Rectangle.Fill>
													<LinearGradientBrush StartPoint="0,0" EndPoint="1,1" SpreadMethod="Repeat">
														<GradientStop Color="#0F0F0F" Offset="0"/>
														<GradientStop Color="#0F0F0F" Offset="0.48"/>
														<GradientStop Color="#1A1A1A" Offset="0.5"/>
														<GradientStop Color="#1A1A1A" Offset="0.98"/>
													</LinearGradientBrush>
												</Rectangle.Fill>
												<Rectangle.RenderTransform>
													<RotateTransform Angle="45"/>
												</Rectangle.RenderTransform>
											</Rectangle>
										</Canvas>

										<!-- No Signal Overlay -->
										<StackPanel HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Spacing="12"
                                                    Visibility="{x:Bind IsOnline, Mode=OneWay, Converter={StaticResource InverseBoolToVisibilityConverter}}">
											<FontIcon Glyph="&#xE7BA;"
                                                      FontSize="48"
                                                      Foreground="#404040"/>
											<TextBlock Text="No Signal"
                                                       FontSize="{StaticResource FontSizeMedium}"
                                                       Foreground="#606060"/>
											<TextBlock Text="Camera Offline"
                                                       FontSize="{StaticResource FontSizeSmall}"
                                                       Foreground="#505050"/>
										</StackPanel>

										<!-- Stream Info Overlay (Top Right) -->
										<StackPanel HorizontalAlignment="Right"
                                                    VerticalAlignment="Top"
                                                    Margin="12"
                                                    Spacing="6"
                                                    Visibility="{x:Bind IsOnline, Mode=OneWay}">
											<Border Background="#CC000000"
                                                    CornerRadius="4"
                                                    Padding="8,4">
												<TextBlock Text="{x:Bind BitrateDisplay, Mode=OneWay}"
                                                           FontSize="11"
                                                           FontWeight="SemiBold"
                                                           Foreground="White"/>
											</Border>
										</StackPanel>

										<!-- Camera Name Overlay (Bottom Left) -->
										<Border HorizontalAlignment="Left"
                                                VerticalAlignment="Bottom"
                                                Background="#CC000000"
                                                CornerRadius="0,4,0,0"
                                                Padding="10,6"
                                                Margin="0,0,0,0"
                                                Visibility="{x:Bind IsOnline, Mode=OneWay}">
											<TextBlock Text="{x:Bind CameraId}"
                                                       FontSize="12"
                                                       FontWeight="SemiBold"
                                                       Foreground="White"/>
										</Border>
									</Grid>
								</Border>

								<!-- Camera Footer Info -->
								<Grid Grid.Row="2"
                                      Background="{StaticResource BackgroundSecondaryBrush}"
                                      Padding="12,10">
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="*"/>
										<ColumnDefinition Width="Auto"/>
									</Grid.ColumnDefinitions>

									<!-- IR and HDR Status -->
									<StackPanel Grid.Column="0"
                                                Orientation="Horizontal"
                                                Spacing="12">
										<TextBlock Text="{x:Bind IrStatusDisplay}"
                                                   FontSize="11"
                                                   Foreground="{StaticResource TextSecondaryBrush}"/>
										<TextBlock Text="•"
                                                   FontSize="11"
                                                   Foreground="{StaticResource TextTertiaryBrush}"/>
										<TextBlock Text="{x:Bind HdrStatusDisplay}"
                                                   FontSize="11"
                                                   Foreground="{StaticResource TextSecondaryBrush}"/>
									</StackPanel>

									<!-- Resolution -->
									<TextBlock Grid.Column="1"
                                               Text="{x:Bind ResolutionDisplay}"
                                               FontSize="11"
                                               Foreground="{StaticResource TextTertiaryBrush}"
                                               VerticalAlignment="Center"/>
                                           Orientation="Horizontal"
                                           ItemWidth="420"
                                           ItemHeight="340"
                                           MaximumRowsOrColumns="4"
                                           HorizontalAlignment="Center"/>
					</ItemsPanelTemplate>
				</ItemsControl.ItemsPanel>

				<ItemsControl.ItemTemplate>
					<DataTemplate x:DataType="viewmodels:CameraStreamViewModel">
						<Border Background="{StaticResource BackgroundPrimaryBrush}"
                                BorderBrush="{StaticResource BorderLightBrush}"
                                BorderThickness="1"
                                CornerRadius="8"
                                Margin="0,0,16,16"
                                Padding="0">
							<Grid>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto"/>
									<RowDefinition Height="*"/>
									<RowDefinition Height="Auto"/>
								</Grid.RowDefinitions>

								<!-- Camera Header -->
								<Grid Grid.Row="0"
                                      Background="{StaticResource BackgroundSecondaryBrush}"
                                      Padding="12,10">
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="*"/>
										<ColumnDefinition Width="Auto"/>
									</Grid.ColumnDefinitions>

									<!-- Camera Name and Status -->
									<StackPanel Grid.Column="0"
                                                Orientation="Horizontal"
                                                Spacing="10">
										<Ellipse Width="10" Height="10"
                                                 Fill="{x:Bind StatusColor, Mode=OneWay}"
                                                 VerticalAlignment="Center"/>
										<TextBlock Text="{x:Bind CameraName}"
                                                   FontWeight="SemiBold"
                                                   FontSize="{StaticResource FontSizeSmall}"
                                                   Foreground="{StaticResource TextPrimaryBrush}"
                                                   VerticalAlignment="Center"/>
									</StackPanel>

									<!-- Recording and Menu -->
									<StackPanel Grid.Column="1"
                                                Orientation="Horizontal"
                                                Spacing="8">
										<!-- Recording Indicator -->
										<Border Background="{x:Bind RecordingColor, Mode=OneWay}"
                                                CornerRadius="12"
                                                Width="24" Height="24"
                                                Visibility="{x:Bind IsRecording, Mode=OneWay}"
                                                ToolTipService.ToolTip="Recording">
											<FontIcon Glyph="&#xE7C8;"
                                                      FontSize="10"
                                                      Foreground="White"/>
										</Border>

										<!-- Context Menu Button -->
										<Button Background="Transparent"
                                                BorderThickness="0"
                                                Padding="6"
                                                Width="32" Height="32"
                                                ToolTipService.ToolTip="More options">
											<FontIcon Glyph="&#xE712;" FontSize="14"/>
											<Button.Flyout>
												<MenuFlyout>
													<MenuFlyoutItem Text="Take Snapshot">
														<MenuFlyoutItem.Icon>
															<FontIcon Glyph="&#xE722;"/>
														</MenuFlyoutItem.Icon>
													</MenuFlyoutItem>
													<MenuFlyoutItem Text="Start Recording">
														<MenuFlyoutItem.Icon>
															<FontIcon Glyph="&#xE714;"/>
														</MenuFlyoutItem.Icon>
													</MenuFlyoutItem>
													<MenuFlyoutSeparator/>
													<MenuFlyoutItem Text="Settings">
														<MenuFlyoutItem.Icon>
															<FontIcon Glyph="&#xE713;"/>
														</MenuFlyoutItem.Icon>
													</MenuFlyoutItem>
												</MenuFlyout>
											</Button.Flyout>
										</Button>
									</StackPanel>
								</Grid>

								<!-- Video Display Area -->
								<Border Grid.Row="1"
                                        Background="Black"
                                        CornerRadius="0"
                                        MinHeight="220">
									<Grid>
										<!-- Video Placeholder with Diagonal Stripes -->
										<Canvas>
											<Rectangle Width="2000" Height="2000"
                                                       Canvas.Left="-500" Canvas.Top="-500"
                                                       RenderTransformOrigin="0.5,0.5">
												<Rectangle.Fill>
													<LinearGradientBrush StartPoint="0,0" EndPoint="1,1" SpreadMethod="Repeat">
														<GradientStop Color="#0F0F0F" Offset="0"/>
														<GradientStop Color="#0F0F0F" Offset="0.48"/>
														<GradientStop Color="#1A1A1A" Offset="0.5"/>
														<GradientStop Color="#1A1A1A" Offset="0.98"/>
													</LinearGradientBrush>
												</Rectangle.Fill>
												<Rectangle.RenderTransform>
													<RotateTransform Angle="45"/>
												</Rectangle.RenderTransform>
											</Rectangle>
										</Canvas>

										<!-- No Signal Overlay -->
										<StackPanel HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Spacing="12"
                                                    Visibility="{x:Bind IsOnline, Mode=OneWay, Converter={StaticResource InverseBoolToVisibilityConverter}}">
											<FontIcon Glyph="&#xE7BA;"
                                                      FontSize="48"
                                                      Foreground="#404040"/>
											<TextBlock Text="No Signal"
                                                       FontSize="{StaticResource FontSizeMedium}"
                                                       Foreground="#606060"/>
											<TextBlock Text="Camera Offline"
                                                       FontSize="{StaticResource FontSizeSmall}"
                                                       Foreground="#505050"/>
										</StackPanel>

										<!-- Stream Info Overlay (Top Right) -->
										<StackPanel HorizontalAlignment="Right"
                                                    VerticalAlignment="Top"
                                                    Margin="12"
                                                    Spacing="6"
                                                    Visibility="{x:Bind IsOnline, Mode=OneWay}">
											<Border Background="#CC000000"
                                                    CornerRadius="4"
                                                    Padding="8,4">
												<TextBlock Text="{x:Bind BitrateDisplay, Mode=OneWay}"
                                                           FontSize="11"
                                                           FontWeight="SemiBold"
                                                           Foreground="White"/>
											</Border>
										</StackPanel>

										<!-- Camera Name Overlay (Bottom Left) -->
										<Border HorizontalAlignment="Left"
                                                VerticalAlignment="Bottom"
                                                Background="#CC000000"
                                                CornerRadius="0,4,0,0"
                                                Padding="10,6"
                                                Margin="0,0,0,0"
                                                Visibility="{x:Bind IsOnline, Mode=OneWay}">
											<TextBlock Text="{x:Bind CameraId}"
                                                       FontSize="12"
                                                       FontWeight="SemiBold"
                                                       Foreground="White"/>
										</Border>
									</Grid>
								</Border>

								<!-- Camera Footer Info -->
								<Grid Grid.Row="2"
                                      Background="{StaticResource BackgroundSecondaryBrush}"
                                      Padding="12,10">
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="*"/>
										<ColumnDefinition Width="Auto"/>
									</Grid.ColumnDefinitions>

									<!-- IR and HDR Status -->
									<StackPanel Grid.Column="0"
                                                Orientation="Horizontal"
                                                Spacing="12">
										<TextBlock Text="{x:Bind IrStatusDisplay}"
                                                   FontSize="11"
                                                   Foreground="{StaticResource TextSecondaryBrush}"/>
										<TextBlock Text="•"
                                                   FontSize="11"
                                                   Foreground="{StaticResource TextTertiaryBrush}"/>
										<TextBlock Text="{x:Bind HdrStatusDisplay}"
                                                   FontSize="11"
                                                   Foreground="{StaticResource TextSecondaryBrush}"/>
									</StackPanel>

									<!-- Resolution -->
									<TextBlock Grid.Column="1"
                                               Text="{x:Bind ResolutionDisplay}"
                                               FontSize="11"
                                               Foreground="{StaticResource TextTertiaryBrush}"
                                               VerticalAlignment="Center"/>
								</Grid>
							</Grid>
						</Border>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>
		</ScrollViewer>
	</Grid>
</Page>
								</Grid>
							</Grid>
						</Border>
					</DataTemplate>
				</ItemsControl>
			</ScrollViewer>
		</Grid>
	</Grid>
</Page>
