<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="Station.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:Microsoft.UI.Xaml.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Trạm Nghĩa Đô - Hệ thống giám sát xâm nhập">

    <Window.SystemBackdrop>
        <MicaBackdrop />
    </Window.SystemBackdrop>

    <Grid Background="{StaticResource BackgroundSecondaryBrush}">
        <controls:NavigationView x:Name="NavView"
                                 PaneTitle="Station"
                                 IsSettingsVisible="True"
                                 IsBackButtonVisible="Collapsed"
                                 IsPaneToggleButtonVisible="True"
                                 IsPaneOpen="True"
                                 SelectionChanged="NavView_SelectionChanged"
                                 PaneDisplayMode="Left"
                                 OpenPaneLength="240"
                                 CompactModeThresholdWidth="640"
                                 ExpandedModeThresholdWidth="1280"
                                 Background="Transparent">

            <!-- Custom Resources for NavigationView -->
            <controls:NavigationView.Resources>
                <!-- Pane Background -->
                <SolidColorBrush x:Key="NavigationViewDefaultPaneBackground" Color="#FAFBFC"/>
                <SolidColorBrush x:Key="NavigationViewExpandedPaneBackground" Color="#FAFBFC"/>

                <!-- Content Background -->
                <SolidColorBrush x:Key="NavigationViewContentBackground" Color="#F8FAFC"/>
                <SolidColorBrush x:Key="NavigationViewContentGridBorderBrush" Color="#E2E8F0"/>

                <!-- Pane Border - Key addition for sidebar border -->
                <Thickness x:Key="NavigationViewContentGridBorderThickness">1,0,0,0</Thickness>
                <SolidColorBrush x:Key="NavigationViewBorderBrush" Color="#E2E8F0"/>

                <!-- Top Pane (PaneTitle area) -->
                <SolidColorBrush x:Key="NavigationViewTopPaneBackground" Color="{StaticResource PrimaryDark}"/>

                <!-- Item Colors -->
                <SolidColorBrush x:Key="NavigationViewItemForeground" Color="{StaticResource TextPrimary}"/>
                <SolidColorBrush x:Key="NavigationViewItemForegroundSelected" Color="{StaticResource PrimaryDark}"/>
                <SolidColorBrush x:Key="NavigationViewItemForegroundPointerOver" Color="{StaticResource PrimaryDark}"/>
                <SolidColorBrush x:Key="NavigationViewItemForegroundPressed" Color="{StaticResource PrimaryDark}"/>

                <!-- Selected Item Background -->
                <SolidColorBrush x:Key="NavigationViewItemBackgroundSelected" Color="{StaticResource PrimaryLight}"/>
                <SolidColorBrush x:Key="NavigationViewItemBackgroundSelectedPointerOver" Color="{StaticResource PrimaryMedium}"/>
                <SolidColorBrush x:Key="NavigationViewItemBackgroundSelectedPressed" Color="{StaticResource PrimaryMedium}"/>

                <!-- Hover Background -->
                <SolidColorBrush x:Key="NavigationViewItemBackgroundPointerOver" Color="#F0F4F8"/>
                <SolidColorBrush x:Key="NavigationViewItemBackgroundPressed" Color="#E6EDF5"/>

                <!-- Selection Indicator -->
                <SolidColorBrush x:Key="NavigationViewSelectionIndicatorForeground" Color="{StaticResource PrimaryDark}"/>
            </controls:NavigationView.Resources>

            <controls:NavigationView.MenuItems>
                <controls:NavigationViewItem Content="Dashboard" Tag="Dashboard" IsSelected="True">
                    <controls:NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE80F;" FontFamily="Segoe MDL2 Assets"/>
                    </controls:NavigationViewItem.Icon>
                </controls:NavigationViewItem>

                <controls:NavigationViewItem Content="Giám sát 4K" Tag="MonitoringDashboard">
                    <controls:NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE7F4;" FontFamily="Segoe MDL2 Assets"/>
                    </controls:NavigationViewItem.Icon>
                </controls:NavigationViewItem>

                <controls:NavigationViewItem Content="Thiết bị" Tag="Devices">
                    <controls:NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE957;" FontFamily="Segoe MDL2 Assets"/>
                    </controls:NavigationViewItem.Icon>
                </controls:NavigationViewItem>

                <controls:NavigationViewItem Content="Video Trực tiếp" Tag="LiveVideo">
                    <controls:NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE714;" FontFamily="Segoe MDL2 Assets"/>
                    </controls:NavigationViewItem.Icon>
                </controls:NavigationViewItem>

                <controls:NavigationViewItem Content="Cảnh báo" Tag="Alerts">
                    <controls:NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE7BA;" FontFamily="Segoe MDL2 Assets"/>
                    </controls:NavigationViewItem.Icon>
                </controls:NavigationViewItem>

                <controls:NavigationViewItem Content="Dữ liệu" Tag="Data">
                    <controls:NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE9D9;" FontFamily="Segoe MDL2 Assets"/>
                    </controls:NavigationViewItem.Icon>
                </controls:NavigationViewItem>

                <controls:NavigationViewItem Content="Map" Tag="Map">
                    <controls:NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE707;" FontFamily="Segoe MDL2 Assets"/>
                    </controls:NavigationViewItem.Icon>
                </controls:NavigationViewItem>

                <controls:NavigationViewItemSeparator/>

                <controls:NavigationViewItem Content="Cấu hình" Tag="Configuration">
                    <controls:NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE713;" FontFamily="Segoe MDL2 Assets"/>
                    </controls:NavigationViewItem.Icon>
                </controls:NavigationViewItem>
            </controls:NavigationView.MenuItems>

            <controls:NavigationView.PaneFooter>
                <Border Background="{StaticResource BackgroundAccentBrush}"
                        CornerRadius="{StaticResource CornerRadiusMedium}"
                        Padding="16,12"
                        Margin="12,0,12,12"
                        BorderBrush="{StaticResource BorderSecondaryBrush}"
                        BorderThickness="1">
                    <StackPanel Spacing="6">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE81E;"
                                      FontSize="14"
                                      Foreground="{StaticResource PrimaryDarkBrush}"/>
                            <TextBlock Text="Thông tin trạm"
                                       FontSize="11"
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource PrimaryDarkBrush}"/>
                        </StackPanel>

                        <TextBlock x:Name="StationNameText"
                                   Text="TRM-HN-001"
                                   FontWeight="SemiBold"
                                   FontSize="13"
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   TextWrapping="Wrap"/>

                        <TextBlock x:Name="StationAreaText"
                                   Text="Khu vực: Miền Bắc"
                                   FontSize="11"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   TextWrapping="Wrap"/>

                        <!-- Connection Status Indicator -->
                        <Border Background="{StaticResource SeverityLowLightBrush}"
                                CornerRadius="4"
                                Padding="8,4"
                                Margin="0,4,0,0">
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <Ellipse Width="6" Height="6"
                                         Fill="{StaticResource SeverityLowBrush}"/>
                                <TextBlock Text="Đã kết nối"
                                           FontSize="10"
                                           Foreground="{StaticResource SeverityLowBrush}"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>
            </controls:NavigationView.PaneFooter>

            <Frame x:Name="ContentFrame"
                   Background="{StaticResource BackgroundSecondaryBrush}"/>
        </controls:NavigationView>
    </Grid>
</Window>
